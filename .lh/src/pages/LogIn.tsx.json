{
    "sourceFile": "src/pages/LogIn.tsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1740724686709,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1740724728714,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,6 +1,8 @@\n import React, { useState } from \"react\";\r\n import { useNavigate } from \"react-router-dom\";\r\n+import bcrypt from \"bcryptjs\";\r\n+\r\n export default function LogIn() {\r\n   const navigate = useNavigate();\r\n   const [email, setEmail] = useState<string>(\"\");\r\n   const [password, setPassword] = useState<string>(\"\");\r\n"
                }
            ],
            "date": 1740724686709,
            "name": "Commit-0",
            "content": "import React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nexport default function LogIn() {\r\n  const navigate = useNavigate();\r\n  const [email, setEmail] = useState<string>(\"\");\r\n  const [password, setPassword] = useState<string>(\"\");\r\n  const [error, setError] = useState<string>(\"\");\r\n\r\n  const handleLogIn = async (e: React.FormEvent<HTMLFormElement>) => {\r\n    e.preventDefault();\r\n\r\n    if (!email || !password) {\r\n      setError(\"Email and password are required.\");\r\n      return;\r\n    }\r\n\r\n    // Retrieve user data from local storage\r\n    const storedUserString = localStorage.getItem(\"user\");\r\n\r\n    if (!storedUserString) {\r\n      setError(\"User not found. Please sign up first.\");\r\n      return;\r\n    }\r\n\r\n    // Safely parse the stored user data\r\n    let storedUser: { email: string; password: string };\r\n    try {\r\n      storedUser = JSON.parse(storedUserString);\r\n    } catch (err) {\r\n      setError(\"Error reading user data. Please try again.\");\r\n      return err;\r\n    }\r\n\r\n    // Compare entered password with stored hashed password\r\n    const isPasswordValid = await bcrypt.compare(password, storedUser.password);\r\n\r\n    if (email === storedUser.email && isPasswordValid) {\r\n      // Simulate token generation\r\n      localStorage.setItem(\"token\", \"dummy-token\");\r\n      navigate(\"/\");\r\n    } else {\r\n      setError(\"Invalid email or password.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center h-screen bg-gray-950\">\r\n      <div className=\"container p-6 max-w-xl h-[90%] bg-gray-900 text-white rounded-md\">\r\n        <img\r\n          src=\"https://upload.wikimedia.org/wikipedia/commons/2/26/Spotify_logo_with_text.svg\"\r\n          alt=\"Spotify Logo\"\r\n          className=\"w-32 mb-4 mx-auto\"\r\n        />\r\n        <h3 className=\"text-center text-xl font-bold mb-6\">\r\n          Log in to Spotify\r\n        </h3>\r\n\r\n        <div className=\"buttons space-y-2 mb-6\">\r\n          <button className=\"w-full flex items-center justify-center gap-2 bg-gray-800 py-2 rounded-full border border-gray-600 hover:bg-gray-700 p-2 text-white hover:border-white\">\r\n            <img\r\n              src=\"https://img.icons8.com/color/48/000000/google-logo.png\"\r\n              alt=\"Google\"\r\n              className=\"h-5\"\r\n            />\r\n            Continue with Google\r\n          </button>\r\n          <button className=\"w-full flex items-center justify-center gap-2 bg-gray-800 py-2 rounded-full border border-gray-600 hover:bg-gray-700 p-2 text-white hover:border-white\">\r\n            <img\r\n              src=\"https://img.icons8.com/fluency/48/000000/facebook-new.png\"\r\n              alt=\"Facebook\"\r\n              className=\"h-5\"\r\n            />\r\n            Continue with Facebook\r\n          </button>\r\n          <button className=\"w-full flex items-center justify-center gap-2 bg-gray-800 py-2 rounded-full border border-gray-600 hover:bg-gray-700 p-2 text-white hover:border-white\">\r\n            <img\r\n              src=\"https://img.icons8.com/ios-filled/50/ffffff/mac-os.png\"\r\n              alt=\"Apple\"\r\n              className=\"h-5\"\r\n            />\r\n            Continue with Apple\r\n          </button>\r\n        </div>\r\n\r\n        {error && <p className=\"text-red-500 text-sm mb-4\">{error}</p>}\r\n\r\n        <form className=\"login-form\" onSubmit={handleLogIn}>\r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"email\" className=\"block text-sm font-medium mb-1\">\r\n              Email or username\r\n            </label>\r\n            <input\r\n              id=\"email\"\r\n              type=\"text\"\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              placeholder=\"Email or username\"\r\n              className=\"w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-black\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"mb-4\">\r\n            <label htmlFor=\"password\" className=\"text-sm font-medium mb-1\">\r\n              Password\r\n            </label>\r\n            <input\r\n              id=\"password\"\r\n              type=\"password\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n              placeholder=\"Password\"\r\n              className=\"block w-full p-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 text-black\"\r\n            />\r\n          </div>\r\n\r\n          <button\r\n            type=\"submit\"\r\n            className=\"w-full p-2 bg-green-500 text-white font-bold rounded-md hover:bg-green-600\"\r\n          >\r\n            Log In\r\n          </button>\r\n          <div className=\"flex flex-col justify-center items-center mt-3\">\r\n            <button>Forgot your password?</button>\r\n            <button className=\"mt-3\" onClick={() => navigate(\"/signup\")}>\r\n              Don't have an account? Sign up for Spotify\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"
        }
    ]
}